Initialize:
	set number 123.456789
	set decimals 4
	set maxChars 16
	op sub maxInts maxChars decimals
	op sub maxInts maxInts 1

	set value number
	printflush message1

Start:
	jump PrintZero equal number 0
	op log10 mag number
	jump Scientific greaterThan mag maxInts

	op mod fraction number 1
	op sub intPart number fraction

PrintInt:
	op log10 intDigits intPart
	op floor intDigits intDigits

	op add intDigits intDigits 1
	set maxDigits intDigits

	jump CalcStart equal fraction 0

	op add maxDigits intDigits decimals
	op add value value rounder

	CalcStart:
		op pow mult 10 intDigits
		op div value number mult	
		set i 0
	DigitLoop:
		op mul value value 10
		op floor digit value
		op mod value value 1

	jump PrintDigit notEqual i intDigits
		print "."
	
	PrintDigit:
		print digit
		op add i i 1
		jump Finish greaterThanEq i maxDigits
		jump DigitLoop notEqual value 0

	jump Finish always

PrintZero:
	print 0

Finish:
	printflush message1

End:
	jump End always
