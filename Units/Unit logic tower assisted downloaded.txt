set enemy null
set rangePropo 0.9
ubind @mega
sensor range @unit @range
ulocate building repair false @copper outx outy found repair
ucontrol within outx outy 8 within 0
op mul unitAprDist range rangePropo
set currenthp 0
sensor maxhp @unit @maxHealth
sensor currenthp @unit @health
op div %hp currenthp maxhp
jump 13 equal within false
jump 1 lessThan %hp 0.99
jump 39 lessThan %hp 0.75
jump 31 equal currenthp 0
getlink turret1 0
radar enemy any any distance turret1 1 enemy
jump 32 equal enemy null
ucontrol flag 17 y unitAprDist 0 0
sensor x enemy @x
sensor y enemy @y
ucontrol approach x y unitAprDist 0 0
ucontrol targetp enemy 1 1 0 0
ucontrol within x y range within 0
jump 27 equal within true
ucontrol boost 1 1 1 0 0
jump 31 equal within false
ucontrol boost 0 1 1 0 0
sensor boosting @unit @boosting
jump 31 equal boosting 0
ucontrol approach x y 1 0 0
end
sensor f @unit @flag
printflush message1
print f
jump 38 notEqual f 17
jump 38 equal f 0
ucontrol flag 0 y unitAprDist 0 0
end
ulocate building repair false @copper outx outy found repair
ucontrol boost 1 y unitAprDist 0 0
sensor maxhp @unit @maxHealth
sensor currenthp @unit @health
op div %hp currenthp maxhp
ucontrol approach outx outy 3 0 0
end
