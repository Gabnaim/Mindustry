Initialize:
	printflush message1
	set maxUnitIndex 37 #Serpulo

Start:
GetUnitType:
	lookup unit unitType unitIndex
	set firstUnit null
	set units 0

BindUnit:
	ubind unitType
	jump NextUnitType equal @unit null
  	jump ProcessUnit notEqual firstUnit null

StartGroup:
	set firstUnit @unit
	jump BindUnit always

ProcessUnit:
	sensor flag @unit @flag
	print flag
	
FinishUnit:
	print "\n"
	op add units units 1
	jump BindUnit notEqual firstUnit @unit

FinishGroup:
	print "total: "
	print units
	print "\n\n"

NextUnitType:
	op add unitIndex unitIndex 1
	jump GetUnitType lessThanEq unitIndex maxUnitIndex
	
Finish:
	set unitIndex 0
	printflush message1
	jump Start always
