Initialize:
	set sourceMin 500

GetLinks:
	set factory reconstructor1
	set unloader unloader1
	set source nucleus1
	jump GetLinks equal factory null
	jump GetLinks equal unloader null
	jump GetLinks equal source null
	
Start:
	sensor facSil factory @silicon
	sensor facGlass factory @metaglass
	sensor facTit factory @titanium
	op div silLevel facSil 260
	op div glassLevel facGlass 80
	op div titLevel facTit 160
	
	FindMin:
		jump MinSil lessThan silLevel glassLevel
		jump MinGlass always
	MinSil:
		jump CheckSilicon lessThan silLevel titLevel
	MinGlass:
		jump CheckGlass lessThan glassLevel titLevel
		jump CheckTitanium always

CheckSilicon:
	set material @silicon
	set facStock facSil
	jump CheckStock always

CheckGlass:
	set material @metaglass
	set facStock facGlass
	jump CheckStock always

CheckTitanium:
	set material @titanium
	set facStock facTit

CheckStock:
	sensor sourceStock source material
	jump NotEnoughStock lessThanEq sourceStock sourceMin
	control config unloader material
	control enabled unloader true
	jump Start always
	
NotEnoughStock:
	control enabled unloader false
	jump Start always

