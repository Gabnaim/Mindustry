Initialize:
	set sourceMin 500

GetLinks:
	set factory factory1
	set unloader unloader1
	set source nucleus1
	jump GetLinks equal factory null
	jump GetLinks equal unloader null
	jump GetLinks equal source null
	control enabled unloader false

Start:
CheckFactory:	
	sensor buildType factory @config
	jump CheckDagger equal buildType @dagger
	jump CheckCrawler equal buildType @crawler
	jump CheckNova equal buildType @nova
	control enabled unloader false
	jump Start always
	
CheckDagger:	
	sensor facSil factory @silicon
	sensor facLead factory @lead
	jump CheckSilicon lessThan facSil facLead
	jump CheckLead always
	
CheckCrawler:
	sensor facSil factory @silicon
	sensor facCoal factory @coal
	jump CheckSilicon lessThan facSil facCoal
	jump CheckCoal always
	
CheckNova:
	sensor facSil factory @silicon
	sensor facLead factory @lead
	sensor facTit factory @titanium
	op div silLevel facSil 60
	op div leadLevel facLead 40
	op div titLevel facTit 40
	
	FindMin:
		jump MinSil lessThan silLevel leadLevel
		jump MinLead always
	MinSil:
		jump CheckSilicon lessThan silLevel titLevel
	MinLead:
		jump CheckLead lessThan leadLevel titLevel
		jump CheckTitanium always

CheckSilicon:
	set material @silicon
	set facStock facSil
	jump CheckStock always
	
CheckLead:
	set material @lead
	set facStock facLead
	jump CheckStock always

CheckCoal:
	set material @coal 
	set facStock facCoal
	jump CheckStock always

CheckTitanium:
	set material @titanium
	set facStock facTit

CheckStock:
	sensor sourceStock source material
	jump NotEnoughStock lessThanEq sourceStock sourceMin
	control config unloader material
	control enabled unloader true
	jump Start always

NotEnoughStock:
	control enabled unloader false
	jump Start always


