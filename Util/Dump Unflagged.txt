Initialize:
	set useMemory true
	set unitType @mono
	set UNIT_TYPE_ADDR 0
	set dropRange 7

	GetLinks:
		set switch switch1
		jump GetLinks equal switch null
		set memory cell1
		jump Start equal useMemory false
		jump GetLinks equal memory null
	
Start:	
	sensor active switch @enabled
	jump Start equal active false
	jump BindUnit equal useMemory false

ReadUnitType:
	read unitTypeId memory UNIT_TYPE_ADDR
	jump Start lessThan unitTypeId 0
	jump Start greaterThan unitTypeId 55
	lookup unit unitType unitTypeId

BindUnit:
	ubind unitType
	jump Start equal @unit null
	sensor flag @unit @flag
	jump Start notEqual flag 0

	sensor carried @unit @totalItems
	jump Start equal carried 0

DumpUnneeded:
	ulocate building core false 0 coreX coreY coreFound core
	ucontrol within coreX coreY dropRange isNearCore
	jump DumpLoop equal isNearCore true
	ucontrol pathfind coreX coreY
	jump Start always

	DumpLoop:
		sensor carried @unit @totalItems
		LoopUntilEmpty:
			ucontrol itemDrop core carried
			sensor carried @unit @totalItems
			jump LoopUntilEmpty greaterThan carried 0 
	jump Start always