Initialize:
	set switch switch1
	jump Initialize equal switch null
#get the flag from the processor that is doing the flagging
GetId:
	set proc processor1
	jump GetId equal proc null
	sensor procX proc @x
	sensor procY proc @y
	op shl procId procX 10 # first 10 bit for x
	op add procId procId procY # second 10 bit for y
	set unitType @zenith

Start:
CheckActive:
	sensor active switch @enabled
	jump Start equal active false
	
BindUnit:
	ubind unitType
	jump Stop equal @unit null
	sensor flag @unit @flag
	jump Start notEqual flag procId
	jump SetFirst equal firstUnit null
	jump Stop equal firstUnit @unit
	jump SetIdle always

SetFirst:
	set firstUnit @unit
	
SetIdle:
	ucontrol idle
	ucontrol flag 0
	ucontrol unbind
	jump Start always

Stop:
	control enabled switch false
	jump Start always
